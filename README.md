# City Service AI Assistant Frontend

Frontend –¥–æ–¥–∞—Ç–æ–∫ –¥–ª—è AI –∞—Å–∏—Å—Ç–µ–Ω—Ç–∞ –º—ñ—Å—å–∫–∏—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤, –ø–æ–±—É–¥–æ–≤–∞–Ω–∏–π –Ω–∞ React, TypeScript —Ç–∞ Vite.

## üöÄ –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó

- **React 19** - UI –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞
- **TypeScript** - —Ç–∏–ø—ñ–∑–∞—Ü—ñ—è
- **Vite 7** - –∑–±—ñ—Ä–∫–∞ —Ç–∞ dev —Å–µ—Ä–≤–µ—Ä
- **Material-UI (MUI)** - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ UI
- **Emotion** - —Å—Ç–∏–ª—ñ–∑–∞—Ü—ñ—è
- **Docker** - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü—ñ—è
- **Nginx** - –≤–µ–±-—Å–µ—Ä–≤–µ—Ä –¥–ª—è production

## üìã –í–∏–º–æ–≥–∏

- Node.js 22+
- npm
- Docker —Ç–∞ Docker Compose (–¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü—ñ—ó)

## üõ†Ô∏è –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

### –õ–æ–∫–∞–ª—å–Ω–∞ —Ä–æ–∑—Ä–æ–±–∫–∞

1. –ö–ª–æ–Ω—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π:

```bash
git clone <repository-url>
cd assistant-frontend
```

2. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:

```bash
npm install
```

3. –°—Ç–≤–æ—Ä—ñ—Ç—å `.env` —Ñ–∞–π–ª –≤ –∫–æ—Ä–µ–Ω—ñ –ø—Ä–æ—î–∫—Ç—É:

```env
VITE_APP_ENV=development
VITE_API_BASE_URL=http://127.0.0.1:8000
```

4. –ó–∞–ø—É—Å—Ç—ñ—Ç—å dev —Å–µ—Ä–≤–µ—Ä:

```bash
npm run dev
```

–î–æ–¥–∞—Ç–æ–∫ –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π –Ω–∞ `http://localhost:5173`

## ‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### –ó–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

#### –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ—ó —Ä–æ–∑—Ä–æ–±–∫–∏ (`.env`)

- `VITE_APP_ENV` - —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ (development/production)
- `VITE_API_BASE_URL` - URL –±–µ–∫–µ–Ω–¥—É –¥–ª—è Vite proxy (–≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –≤ `vite.config.ts`)

#### –î–ª—è Docker

- `BACKEND_URL` - URL –±–µ–∫–µ–Ω–¥—É –¥–ª—è nginx proxy (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º: `http://host.docker.internal:8000`)
- `VITE_APP_ENV` - —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ –¥–ª—è build (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º: `production`)

### Vite Proxy

–£ —Ä–µ–∂–∏–º—ñ —Ä–æ–∑—Ä–æ–±–∫–∏ (`npm run dev`) Vite –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–æ–∫—Å—É—î –∑–∞–ø–∏—Ç–∏ `/api/*` –¥–æ –±–µ–∫–µ–Ω–¥—É, –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ–≥–æ –≤ `vite.config.ts` —á–µ—Ä–µ–∑ –∑–º—ñ–Ω–Ω—É `VITE_API_BASE_URL`.

### Production Build

–£ production build –≤—Å—ñ –∑–∞–ø–∏—Ç–∏ –π–¥—É—Ç—å —á–µ—Ä–µ–∑ `/api`, —è–∫–∏–π –æ–±—Ä–æ–±–ª—è—î—Ç—å—Å—è nginx proxy. URL –±–µ–∫–µ–Ω–¥—É –Ω–∞–ª–∞—à—Ç–æ–≤—É—î—Ç—å—Å—è —á–µ—Ä–µ–∑ –∑–º—ñ–Ω–Ω—É `BACKEND_URL` –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ.

## üê≥ Docker

### –ó–±—ñ—Ä–∫–∞ —Ç–∞ –∑–∞–ø—É—Å–∫

```bash
# –ó–±—ñ—Ä–∫–∞ –æ–±—Ä–∞–∑—É
docker-compose build

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker-compose up

# –ó–∞–ø—É—Å–∫ —É —Ñ–æ–Ω–æ–≤–æ–º—É —Ä–µ–∂–∏–º—ñ
docker-compose up -d
```

–î–æ–¥–∞—Ç–æ–∫ –±—É–¥–µ –¥–æ—Å—Ç—É–ø–Ω–∏–π –Ω–∞ `http://localhost:8080`

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è production

–í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ –ø–µ—Ä–µ–¥ –∑–±—ñ—Ä–∫–æ—é:

```bash
# –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ Docker
BACKEND_URL=http://host.docker.internal:8000 docker-compose build

# –î–ª—è AWS/Production
BACKEND_URL=https://api.production.com docker-compose build
```

–ê–±–æ —Å—Ç–≤–æ—Ä—ñ—Ç—å `.env` —Ñ–∞–π–ª:

```env
BACKEND_URL=https://api.production.com
VITE_APP_ENV=production
```

## üì¶ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É

```
assistant-frontend/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ api/              # API –∫–ª—ñ—î–Ω—Ç
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts      # –§—É–Ω–∫—Ü—ñ—ó –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ API
‚îÇ   ‚îú‚îÄ‚îÄ components/        # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Chat/         # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —á–∞—Ç—É
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ FinalRequest/ # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Ñ—ñ–Ω–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø–∏—Ç—É
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ InputBar/     # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –≤–≤–æ–¥—É
‚îÇ   ‚îú‚îÄ‚îÄ hooks/            # React —Ö—É–∫–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useChatMessages.ts
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ useConversationChat.ts
‚îÇ   ‚îú‚îÄ‚îÄ styles/           # –ì–ª–æ–±–∞–ª—å–Ω—ñ —Å—Ç–∏–ª—ñ
‚îÇ   ‚îú‚îÄ‚îÄ theme/            # –¢–µ–º–∞ Material-UI
‚îÇ   ‚îú‚îÄ‚îÄ App.tsx           # –ì–æ–ª–æ–≤–Ω–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
‚îÇ   ‚îú‚îÄ‚îÄ env.ts            # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
‚îÇ   ‚îú‚îÄ‚îÄ locale.ts         # –õ–æ–∫–∞–ª—ñ–∑–∞—Ü—ñ—è
‚îÇ   ‚îú‚îÄ‚îÄ main.tsx          # –¢–æ—á–∫–∞ –≤—Ö–æ–¥—É
‚îÇ   ‚îî‚îÄ‚îÄ types.ts          # TypeScript —Ç–∏–ø–∏
‚îú‚îÄ‚îÄ public/               # –°—Ç–∞—Ç–∏—á–Ω—ñ —Ñ–∞–π–ª–∏
‚îú‚îÄ‚îÄ docker-compose.yml    # Docker Compose –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ Dockerfile            # Docker –æ–±—Ä–∞–∑
‚îú‚îÄ‚îÄ nginx.conf            # Nginx –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è (—à–∞–±–ª–æ–Ω)
‚îú‚îÄ‚îÄ docker-entrypoint.sh  # Entrypoint —Å–∫—Ä–∏–ø—Ç –¥–ª—è Docker
‚îú‚îÄ‚îÄ vite.config.ts        # Vite –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îî‚îÄ‚îÄ package.json          # –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ —Ç–∞ —Å–∫—Ä–∏–ø—Ç–∏
```

## üìú –°–∫—Ä–∏–ø—Ç–∏

- `npm run dev` - –∑–∞–ø—É—Å–∫ dev —Å–µ—Ä–≤–µ—Ä–∞
- `npm run build` - –∑–±—ñ—Ä–∫–∞ –¥–ª—è production
- `npm run preview` - –ø–µ—Ä–µ–≥–ª—è–¥ production build
- `npm run lint` - –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–¥—É ESLint
- `npm run lint:fix` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø–æ–º–∏–ª–æ–∫ ESLint
- `npm run format` - –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è Prettier
- `npm run format:fix` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è –∫–æ–¥—É

## üåê Deployment –Ω–∞ AWS

### ECS/EC2

1. –ó–±–µ—Ä—ñ—Ç—å Docker –æ–±—Ä–∞–∑:

```bash
docker build -t assistant-frontend .
```

2. –ó–∞–ø—É—Å—Ç—ñ—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑ –∑–º—ñ–Ω–Ω–∏–º–∏ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞:

```bash
docker run -d \
  -p 80:80 \
  -e BACKEND_URL=https://api.production.com \
  assistant-frontend
```

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

–í AWS ECS/EC2 –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–º—ñ–Ω–Ω—É `BACKEND_URL` –≤ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∞–±–æ —á–µ—Ä–µ–∑ AWS Systems Manager Parameter Store.

## üîß API

### Endpoints

- `POST /api/conversations/` - –≤—ñ–¥–ø—Ä–∞–≤–∫–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ —á–∞—Ç

### –¢–∏–ø–∏ –¥–∞–Ω–∏—Ö

–î–∏–≤. `src/types.ts` –¥–ª—è –ø–æ–≤–Ω–æ–≥–æ –æ–ø–∏—Å—É —Ç–∏–ø—ñ–≤:

- `Conversation` - –æ—Å–Ω–æ–≤–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–æ–∑–º–æ–≤–∏
- `ConversationMessage` - –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ —á–∞—Ç—ñ
- `ConversationContext` - –∫–æ–Ω—Ç–µ–∫—Å—Ç —Ä–æ–∑–º–æ–≤–∏
- `Summary` - –ø—ñ–¥—Å—É–º–æ–∫ —Ä–æ–∑–º–æ–≤–∏

## üêõ Troubleshooting

### CORS –ø–æ–º–∏–ª–∫–∏

–Ø–∫—â–æ –≤–∏–Ω–∏–∫–∞—é—Ç—å CORS –ø–æ–º–∏–ª–∫–∏:

1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ –∑–∞–ø–∏—Ç–∏ –π–¥—É—Ç—å —á–µ—Ä–µ–∑ `/api` (–Ω–µ –Ω–∞–ø—Ä—è–º—É –¥–æ –±–µ–∫–µ–Ω–¥—É)
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è `BACKEND_URL` –≤ Docker
3. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ nginx proxy –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π

### Vite proxy –Ω–µ –ø—Ä–∞—Ü—é—î

1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ `VITE_API_BASE_URL` –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –≤ `.env`
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å dev —Å–µ—Ä–≤–µ—Ä –ø—ñ—Å–ª—è –∑–º—ñ–Ω–∏ `.env`
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ –±–µ–∫–µ–Ω–¥ –¥–æ—Å—Ç—É–ø–Ω–∏–π –∑–∞ –≤–∫–∞–∑–∞–Ω–∏–º URL

### Docker build –Ω–µ –±–∞—á–∏—Ç—å –∑–º—ñ–Ω–Ω—ñ

1. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –∑–º—ñ–Ω–Ω—ñ –ø–µ—Ä–µ–¥–∞—é—Ç—å—Å—è —á–µ—Ä–µ–∑ `docker-compose.yml` –∞–±–æ `.env`
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ `ARG` —Ç–∞ `ENV` –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω—ñ –≤ `Dockerfile`
